function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function a(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,n,a,o){return t[1]&&o?e(a.ctx.slice(),t[1](o(n))):a.ctx}function l(t,e,n,a,o,r,s){const l=function(t,e,n,a){if(t[2]&&a){const o=t[2](a(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let a=0;a<n;a+=1)t[a]=e.dirty[a]|o[a];return t}return e.dirty|o}return e.dirty}(e,a,o,r);if(l){const o=i(e,n,a,s);t.p(o,l)}}function c(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function u(t,e){const n={};e=new Set(e);for(const a in t)e.has(a)||"$"===a[0]||(n[a]=t[a]);return n}function f(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const a in e)null==e[a]?t.removeAttribute(a):"style"===a?t.style.cssText=e[a]:"__value"===a?t.value=t[a]=e[a]:n[a]&&n[a].set?t[a]=e[a]:$(t,a,e[a])}function y(t,e){t.value=null==e?"":e}function x(t,e,n){t.classList[n?"add":"remove"](e)}class w{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=h(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)d(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(b)}}let k;function _(t){k=t}function A(){if(!k)throw new Error("Function called outside component initialization");return k}function M(t){A().$$.after_update.push(t)}function N(){const t=A();return(e,n)=>{const a=t.$$.callbacks[e];if(a){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);a.slice().forEach(e=>{e.call(t,o)})}}}function q(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const E=[],L=[],C=[],S=[],T=Promise.resolve();let I=!1;function O(){I||(I=!0,T.then(H))}function D(t){C.push(t)}let V=!1;const j=new Set;function H(){if(!V){V=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];_(e),K(e.$$)}for(_(null),E.length=0;L.length;)L.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];j.has(e)||(j.add(e),e())}C.length=0}while(E.length);for(;S.length;)S.pop()();I=!1,V=!1,j.clear()}}function K(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const F=new Set;let U;function P(){U={r:0,c:[],p:U}}function R(){U.r||o(U.c),U=U.p}function Y(t,e){t&&t.i&&(F.delete(t),t.i(e))}function z(t,e,n,a){if(t&&t.o){if(F.has(t))return;F.add(t),U.c.push(()=>{F.delete(t),a&&(n&&t.d(1),a())}),t.o(e)}}function B(t,e){const n={},a={},o={$$scope:1};let r=t.length;for(;r--;){const s=t[r],i=e[r];if(i){for(const t in s)t in i||(a[t]=1);for(const t in i)o[t]||(n[t]=i[t],o[t]=1);t[r]=i}else for(const t in s)o[t]=1}for(const t in a)t in n||(n[t]=void 0);return n}function G(t){t&&t.c()}function J(t,e,a){const{fragment:s,on_mount:i,on_destroy:l,after_update:c}=t.$$;s&&s.m(e,a),D(()=>{const e=i.map(n).filter(r);l?l.push(...e):o(e),t.$$.on_mount=[]}),c.forEach(D)}function W(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(e,n,r,s,i,l,c=[-1]){const u=k;_(e);const f=n.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:a(),dirty:c,skip_bound:!1};let h=!1;if(d.ctx=r?r(e,f,(t,n,...a)=>{const o=a.length?a[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&function(t,e){-1===t.$$.dirty[0]&&(E.push(t),O(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],d.update(),h=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=(p=n.target,Array.from(p.childNodes));d.fragment&&d.fragment.l(t),t.forEach(b)}else d.fragment&&d.fragment.c();n.intro&&Y(e.$$.fragment),J(e,n.target,n.anchor),H()}var p;_(u)}class Z{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Q=function(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t,e){var n;n={},t.exports=n,n.simpleFilter=function(t,e){return e.filter((function(e){return n.test(t,e)}))},n.test=function(t,e){return null!==n.match(t,e)},n.match=function(t,e,n){n=n||{};var a,o=0,r=[],s=e.length,i=0,l=0,c=n.pre||"",u=n.post||"",f=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var d=0;d<s;d++)a=e[d],f[d]===t[o]?(a=c+a+u,o+=1,l+=1+l):l=0,i+=l,r[r.length]=a;return o===t.length?(i=f===t?1/0:i,{rendered:r.join(""),score:i}):null},n.filter=function(t,e,a){return e&&0!==e.length?"string"!=typeof t?e:(a=a||{},e.reduce((function(e,o,r,s){var i=o;a.extract&&(i=a.extract(o));var l=n.match(t,i,a);return null!=l&&(e[e.length]={string:l.rendered,score:l.score,index:r,original:o}),e}),[]).sort((function(t,e){var n=e.score-t.score;return n||t.index-e.index}))):[]}}));function tt(n){let a,r,s,i,l,c,u,w,k=[n[6],{type:"search"},{id:n[1]},{name:n[4]}],_={};for(let t=0;t<k.length;t+=1)_=e(_,k[t]);return{c(){a=h("form"),r=h("label"),s=p(n[2]),l=g(),c=h("input"),$(r,"id",i=n[1]+"-label"),$(r,"for",n[1]),$(r,"class","svelte-5m0wg6"),x(r,"hide-label",n[3]),v(c,_),x(c,"svelte-5m0wg6",!0),$(a,"class","svelte-search"),$(a,"role","search"),$(a,"aria-labelledby",n[1])},m(t,e){var o;d(t,a,e),f(a,r),f(r,s),f(a,l),f(a,c),n[17](c),y(c,n[0]),u||(w=[m(c,"input",n[18]),m(c,"input",n[12]),m(c,"change",n[13]),m(c,"focus",n[14]),m(c,"blur",n[15]),m(c,"keydown",n[16]),m(a,"submit",(o=n[11],function(t){return t.preventDefault(),o.call(this,t)}))],u=!0)},p(t,[e]){var n,o;4&e&&(n=s,o=""+(o=t[2]),n.wholeText!==o&&(n.data=o)),2&e&&i!==(i=t[1]+"-label")&&$(r,"id",i),2&e&&$(r,"for",t[1]),8&e&&x(r,"hide-label",t[3]),v(c,_=B(k,[64&e&&t[6],{type:"search"},2&e&&{id:t[1]},16&e&&{name:t[4]}])),1&e&&y(c,t[0]),x(c,"svelte-5m0wg6",!0),2&e&&$(a,"aria-labelledby",t[1])},i:t,o:t,d(t){t&&b(a),n[17](null),u=!1,o(w)}}}function et(t,n,a){const o=["id","label","hideLabel","name","value","debounce","debounceValue","clear","focus"];let r=u(n,o),{id:s="search"+Math.random().toString(36)}=n,{label:i="Search"}=n,{hideLabel:l=!1}=n,{name:f="search"}=n,{value:d=""}=n,{debounce:b=!1}=n,{debounceValue:h=250}=n;const p=N();let g=d,m=void 0,$=!1,v=void 0;var y;return y=()=>(n.autofocus&&window.requestAnimationFrame(()=>{m.focus()}),()=>{void 0!==v&&clearTimeout(v)}),A().$$.on_mount.push(y),M(()=>{var t;d.length>0&&d!==g&&(b?(t=()=>p("type"),$||($=!0,v=setTimeout(()=>{t(),$=!1},h))):p("type")),0===d.length&&g.length>0&&p("clear"),g=d}),t.$$set=t=>{a(24,n=e(e({},n),c(t))),a(6,r=u(n,o)),"id"in t&&a(1,s=t.id),"label"in t&&a(2,i=t.label),"hideLabel"in t&&a(3,l=t.hideLabel),"name"in t&&a(4,f=t.name),"value"in t&&a(0,d=t.value),"debounce"in t&&a(7,b=t.debounce),"debounceValue"in t&&a(8,h=t.debounceValue)},n=c(n),[d,s,i,l,f,m,r,b,h,function(){a(0,d="")},function(){m.focus()},function(e){q(t,e)},function(e){q(t,e)},function(e){q(t,e)},function(e){q(t,e)},function(e){q(t,e)},function(e){q(t,e)},function(t){L[t?"unshift":"push"](()=>{m=t,a(5,m)})},function(){d=this.value,a(0,d)}]}class nt extends Z{constructor(t){super(),X(this,t,et,tt,s,{id:1,label:2,hideLabel:3,name:4,value:0,debounce:7,debounceValue:8,clear:9,focus:10})}get clear(){return this.$$.ctx[9]}get focus(){return this.$$.ctx[10]}}const at=t=>({result:64&t[0]}),ot=t=>({result:t[31]});function rt(t,e,n){const a=t.slice();return a[31]=e[n],a[33]=n,a}function st(t){let e,n,a,o=t[6],r=[];for(let e=0;e<o.length;e+=1)r[e]=lt(rt(t,o,e));const s=t=>z(r[t],1,1,()=>{r[t]=null});return{c(){e=h("ul");for(let t=0;t<r.length;t+=1)r[t].c();$(e,"class","svelte-typeahead-list svelte-9qlbg2"),$(e,"role","listbox"),$(e,"aria-labelledby",""),$(e,"id",n=t[1]+"-listbox")},m(t,n){d(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null);a=!0},p(t,i){if(4322&i[0]){let n;for(o=t[6],n=0;n<o.length;n+=1){const a=rt(t,o,n);r[n]?(r[n].p(a,i),Y(r[n],1)):(r[n]=lt(a),r[n].c(),Y(r[n],1),r[n].m(e,null))}for(P(),n=o.length;n<r.length;n+=1)s(n);R()}(!a||2&i[0]&&n!==(n=t[1]+"-listbox"))&&$(e,"id",n)},i(t){if(!a){for(let t=0;t<o.length;t+=1)Y(r[t]);a=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)z(r[t]);a=!1},d(t){t&&b(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function it(t){let e,n,a=t[31].string+"";return{c(){n=p(""),e=new w(n)},m(t,o){e.m(a,t,o),d(t,n,o)},p(t,n){64&n[0]&&a!==(a=t[31].string+"")&&e.p(a)},d(t){t&&b(n),t&&e.d()}}}function lt(t){let e,n,a,o,r,s,c;const u=t[13].default,p=function(t,e,n,a){if(t){const o=i(t,e,n,a);return t[0](o)}}(u,t,t[12],ot),v=p||it(t);function y(...e){return t[25](t[33],...e)}return{c(){e=h("li"),v&&v.c(),n=g(),$(e,"role","option"),$(e,"id",a=t[1]+"-result"),$(e,"aria-selected",o=t[5]===t[33]),$(e,"class","svelte-9qlbg2"),x(e,"selected",t[5]===t[33])},m(t,a){d(t,e,a),v&&v.m(e,null),f(e,n),r=!0,s||(c=m(e,"click",y),s=!0)},p(n,s){t=n,p?p.p&&4160&s[0]&&l(p,u,t,t[12],s,at,ot):v&&v.p&&64&s[0]&&v.p(t,s),(!r||2&s[0]&&a!==(a=t[1]+"-result"))&&$(e,"id",a),(!r||32&s[0]&&o!==(o=t[5]===t[33]))&&$(e,"aria-selected",o),32&s[0]&&x(e,"selected",t[5]===t[33])},i(t){r||(Y(v,t),r=!0)},o(t){z(v,t),r=!1},d(t){t&&b(e),v&&v.d(t),s=!1,c()}}}function ct(t){let n,a,o,r,s,i,l,c,u;const p=[t[8],{"aria-autocomplete":"list"},{"aria-controls":t[1]+"-listbox"},{"aria-labelledby":t[1]+"-label"},{"aria-activedescendant":""},{id:t[1]}];function v(e){t[16].call(null,e)}let y={};for(let t=0;t<p.length;t+=1)y=e(y,p[t]);void 0!==t[0]&&(y.value=t[0]),a=new nt({props:y}),t[15](a),L.push(()=>function(t,e,n){const a=t.$$.props[e];void 0!==a&&(t.$$.bound[a]=n,n(t.$$.ctx[a]))}(a,"value",v)),a.$on("input",t[17]),a.$on("change",t[18]),a.$on("focus",t[19]),a.$on("focus",t[20]),a.$on("clear",t[21]),a.$on("blur",t[22]),a.$on("keydown",t[23]),a.$on("keydown",t[24]);let w=!t[4]&&t[6].length>0&&st(t);return{c(){n=h("div"),G(a.$$.fragment),r=g(),w&&w.c(),$(n,"role","combobox"),$(n,"aria-haspopup","listbox"),$(n,"aria-owns",s=t[1]+"-listbox"),$(n,"class","svelte-typeahead svelte-9qlbg2"),$(n,"aria-expanded",i=!t[4]&&t[6].length>0),$(n,"id",t[1]),x(n,"dropdown",t[6].length>0)},m(e,o){d(e,n,o),J(a,n,null),f(n,r),w&&w.m(n,null),t[26](n),l=!0,c||(u=m(window,"click",t[14]),c=!0)},p(t,e){const r=258&e[0]?B(p,[256&e[0]&&(c=t[8],"object"==typeof c&&null!==c?c:{}),p[1],2&e[0]&&{"aria-controls":t[1]+"-listbox"},2&e[0]&&{"aria-labelledby":t[1]+"-label"},p[4],2&e[0]&&{id:t[1]}]):{};var c,u;!o&&1&e[0]&&(o=!0,r.value=t[0],u=()=>o=!1,S.push(u)),a.$set(r),!t[4]&&t[6].length>0?w?(w.p(t,e),80&e[0]&&Y(w,1)):(w=st(t),w.c(),Y(w,1),w.m(n,null)):w&&(P(),z(w,1,1,()=>{w=null}),R()),(!l||2&e[0]&&s!==(s=t[1]+"-listbox"))&&$(n,"aria-owns",s),(!l||80&e[0]&&i!==(i=!t[4]&&t[6].length>0))&&$(n,"aria-expanded",i),(!l||2&e[0])&&$(n,"id",t[1]),64&e[0]&&x(n,"dropdown",t[6].length>0)},i(t){l||(Y(a.$$.fragment,t),Y(w),l=!0)},o(t){z(a.$$.fragment,t),z(w),l=!1},d(e){e&&b(n),t[15](null),W(a),w&&w.d(),t[26](null),c=!1,u()}}}function ut(t,n,a){const o=["id","value","data","extract","autoselect"];let r=u(n,o),{$$slots:s={},$$scope:i}=n,{id:l="typeahead-"+Math.random().toString(36)}=n,{value:f=""}=n,{data:d=[]}=n,{extract:b=(t=>t)}=n,{autoselect:h=!0}=n;const p=N();let g=void 0,m=void 0,$=!1,v=-1,y="";async function x(){a(0,f=b(k[v].original)),p("select",{selectedIndex:v,selected:f}),await(O(),T),m.focus(),a(4,$=!0)}M(()=>{y!==_&&h&&a(5,v=0),y=_});let w,k,_;return t.$$set=t=>{n=e(e({},n),c(t)),a(8,r=u(n,o)),"id"in t&&a(1,l=t.id),"value"in t&&a(0,f=t.value),"data"in t&&a(9,d=t.data),"extract"in t&&a(10,b=t.extract),"autoselect"in t&&a(11,h=t.autoselect),"$$scope"in t&&a(12,i=t.$$scope)},t.$$.update=()=>{1024&t.$$.dirty[0]&&a(29,w={pre:"<mark>",post:"</mark>",extract:b}),536871425&t.$$.dirty[0]&&a(6,k=Q.filter(f,d,w).filter(({score:t})=>t>0)),1088&t.$$.dirty[0]&&(_=k.map(t=>b(t.original)).join(""))},[f,l,g,m,$,v,k,x,r,d,b,h,i,s,({target:t})=>{!$&&k.length>0&&g&&!g.contains(t)&&a(4,$=!0)},function(t){L[t?"unshift":"push"](()=>{m=t,a(3,m)})},function(t){f=t,a(0,f)},function(e){q(t,e)},function(e){q(t,e)},function(e){q(t,e)},()=>{a(4,$=!1)},()=>{a(4,$=!1)},function(e){q(t,e)},function(e){q(t,e)},({key:t})=>{switch(t){case"Enter":x();break;case"ArrowDown":a(5,v+=1),v===k.length&&a(5,v=0);break;case"ArrowUp":a(5,v-=1),v<0&&a(5,v=k.length-1);break;case"Escape":a(0,f=""),m.focus(),a(4,$=!0)}},t=>{a(5,v=t),x()},function(t){L[t?"unshift":"push"](()=>{g=t,a(2,g)})}]}class ft extends Z{constructor(t){super(),X(this,t,ut,ct,s,{id:1,value:0,data:9,extract:10,autoselect:11},[-1,-1])}}const dt=[{abbr:"AL",state:"Alabama"},{abbr:"AK",state:"Alaska"},{abbr:"AZ",state:"Arizona"},{abbr:"AR",state:"Arkansas"},{abbr:"CA",state:"California"},{abbr:"CO",state:"Colorado"},{abbr:"CT",state:"Connecticut"},{abbr:"DE",state:"Delaware"},{abbr:"FL",state:"Florida"},{abbr:"GA",state:"Georgia"},{abbr:"HI",state:"Hawaii"},{abbr:"ID",state:"Idaho"},{abbr:"IL",state:"Illinois"},{abbr:"IN",state:"Indiana"},{abbr:"IA",state:"Iowa"},{abbr:"KS",state:"Kansas"},{abbr:"KY",state:"Kentucky"},{abbr:"LA",state:"Louisiana"},{abbr:"ME",state:"Maine"},{abbr:"MD",state:"Maryland"},{abbr:"MA",state:"Massachusetts"},{abbr:"MI",state:"Michigan"},{abbr:"MN",state:"Minnesota"},{abbr:"MS",state:"Mississippi"},{abbr:"MO",state:"Missouri"},{abbr:"MT",state:"Montana"},{abbr:"NE",state:"Nebraska"},{abbr:"NV",state:"Nevada"},{abbr:"NH",state:"New Hampshire"},{abbr:"NJ",state:"New Jersey"},{abbr:"NM",state:"New Mexico"},{abbr:"NY",state:"New York"},{abbr:"NC",state:"North Carolina"},{abbr:"ND",state:"North Dakota"},{abbr:"OH",state:"Ohio"},{abbr:"OK",state:"Oklahoma"},{abbr:"OR",state:"Oregon"},{abbr:"PA",state:"Pennsylvania"},{abbr:"RI",state:"Rhode Island"},{abbr:"SC",state:"South Carolina"},{abbr:"SD",state:"South Dakota"},{abbr:"TN",state:"Tennessee"},{abbr:"TX",state:"Texas"},{abbr:"UT",state:"Utah"},{abbr:"VT",state:"Vermont"},{abbr:"VA",state:"Virginia"},{abbr:"WA",state:"Washington"}];function bt(e){let n,a,o,r,s,i,l,c;return o=new ft({props:{placeholder:'Search U.S. states (e.g. "California")',autofocus:!0,hideLabel:!0,data:dt,extract:ht}}),o.$on("select",e[0]),{c(){n=h("h1"),n.textContent="svelte-typeahead",a=g(),G(o.$$.fragment),r=g(),s=h("pre"),i=g(),l=h("p"),l.innerHTML='<a href="https://github.com/metonym/svelte-typeahead/tree/master/example" rel="nofollow">Example source code</a>',$(s,"class","language-svelte")},m(t,e){d(t,n,e),d(t,a,e),J(o,t,e),d(t,r,e),d(t,s,e),s.innerHTML='<code class="language-svelte">&lt;script&gt;\n  import Typeahead from &quot;svelte-typeahead&quot;;\n  import &#123; states &#125; from &quot;./data&quot;;\n&lt;/script&gt;\n\n&lt;Typeahead\n  placeholder=&quot;&#123;&#96;Search U.S. states (e.g. &quot;California&quot;)&#96;&#125;&quot;\n  autofocus\n  hideLabel\n  data=&quot;&#123;states&#125;&quot;\n  extract=&quot;&#123;(item) =&gt; item.state&#125;&quot;\n  on:select=&quot;&#123;(&#123; detail &#125;) =&gt; &#123;\n    console.log(&#39;select&#39;, detail);\n  &#125;&#125;&quot;\n  /&gt;</code>',d(t,i,e),d(t,l,e),c=!0},p:t,i(t){c||(Y(o.$$.fragment,t),c=!0)},o(t){z(o.$$.fragment,t),c=!1},d(t){t&&b(n),t&&b(a),W(o,t),t&&b(r),t&&b(s),t&&b(i),t&&b(l)}}}const ht=t=>t.state;function pt(t){return[({detail:t})=>{console.log("select",t)}]}new class extends Z{constructor(t){super(),X(this,t,pt,bt,s,{})}}({target:document.body});
